"use strict";(self.webpackChunkbusinesstechsystem=self.webpackChunkbusinesstechsystem||[]).push([[413],{7146:function(n,e,t){t.d(e,{FH:function(){return o},Ld:function(){return c}});var s=t(4165),r=t(5861),a=(t(2062),t(4801)),i=t(1620),c=function(){var n=(0,r.Z)((0,s.Z)().mark((function n(e,t,r,i){var c,l=arguments;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=l.length>5&&void 0!==l[5]?l[5]:{},"fetch"===(l.length>4&&void 0!==l[4]?l[4]:"fetch")?o(e,t,i,r):parseInt(t)!==parseInt(c.instLinker)&&parseInt(c.softwareId)!==parseInt(parseInt("".concat(t).split("").reverse().join(""))/1e3)||r((0,a.m$)(c));case 3:case"end":return n.stop()}}),n)})));return function(e,t,s,r){return n.apply(this,arguments)}}(),o=function(n,e,t,s){fetch("".concat(i.l,"/sub/get"),{method:"POST",headers:{"content-type":"application/json",authorization:"bearer ".concat(n)},body:JSON.stringify({online:t,instLinker:e})}).then((function(n){return n.json()})).then((function(n){200===n.status&&s((0,a.U6)(n.subs))})).catch((function(){}))}},4409:function(n,e,t){t.r(e),t.d(e,{default:function(){return B}});var s=t(9439),r=t(2791),a=t(7689),i=t(9434),c=t(2141),o=t(5124),l=t(555),u=t(184),d=function(n){var e=n.setDrawer,t=n.navigate;return"Kenya"===(0,i.v9)((function(n){return n.inst.activeInst})).sub?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.Z.Item,{children:(0,u.jsx)("p",{className:"nav-link",onClick:function(){window.scroll(0,0),e(!1),t("modes/mpesa-setup")},children:"Mpesa SetUp"})}),(0,u.jsx)(c.Z.Item,{children:(0,u.jsx)("p",{className:"nav-link",onClick:function(){window.scroll(0,0),e(!1),t("mpesa-payments")},children:"Mpesa Payments"})})]}):(0,u.jsx)(u.Fragment,{})},p=function(n){var e=n.setDrawer,t=(0,a.s0)();(0,i.v9)((function(n){return n.inst.activeInst}));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(c.Z,{style:{width:"100%"},children:[(0,u.jsxs)(c.Z.Toggle,{variant:"transparent",className:"nav-link",children:[(0,u.jsx)(o.Z,{})," Admin"," "]}),(0,u.jsxs)(c.Z.Menu,{variant:"dark",children:[(0,u.jsx)(c.Z.Item,{children:(0,u.jsx)("p",{className:"nav-link",onClick:function(){window.scroll(0,0),e(!1),t("modes")},children:"Payment Modes"})}),(0,u.jsx)(d,{setDrawer:e,navigate:t}),(0,u.jsx)(c.Z.Item,{children:(0,u.jsx)("p",{className:"nav-link",onClick:function(){window.scroll(0,0),t("edit"),e(!1)},children:"Edit Institution"})})]})]}),(0,u.jsx)("hr",{}),(0,u.jsxs)(c.Z,{style:{width:"100%"},children:[(0,u.jsxs)(c.Z.Toggle,{variant:"transparent",className:"nav-link",children:[(0,u.jsx)(l.Z,{})," H.R. Manager"]}),(0,u.jsxs)(c.Z.Menu,{variant:"dark",children:[(0,u.jsx)(c.Z.Item,{children:(0,u.jsx)("p",{className:"nav-link",onClick:function(){window.scroll(0,0),e(!1),t("staffs")},children:"Staffs"})}),(0,u.jsx)(c.Z.Item,{children:(0,u.jsx)("p",{className:"nav-link",onClick:function(){window.scroll(0,0),e(!1),t("payroll-items")},children:"Payroll Items"})})," ",(0,u.jsx)(c.Z.Item,{children:(0,u.jsx)("p",{className:"nav-link",onClick:function(){window.scroll(0,0),e(!1),t("payroll-summary")},children:"Payroll Summary"})})]})]}),(0,u.jsx)("hr",{})]})},m=t(7856),x=function(n){var e=n.setDrawer,t=(0,a.s0)();(0,i.v9)((function(n){return n.inst.activeInst}));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(c.Z,{style:{width:"100%"},children:[(0,u.jsxs)(c.Z.Toggle,{className:"nav-link",variant:"transparent",children:[(0,u.jsx)(m.Z,{})," Finances"]}),(0,u.jsxs)(c.Z.Menu,{variant:"dark",children:[(0,u.jsx)(c.Z.Item,{children:(0,u.jsx)("p",{className:"nav-link",onClick:function(){window.scroll(0,0),e(!1),t("payments")},children:"Payments"})}),(0,u.jsx)(c.Z.Item,{children:(0,u.jsx)("p",{className:"nav-link",onClick:function(){window.scroll(0,0),e(!1),t("income-statement")},children:"Profit & Loss"})}),(0,u.jsx)(c.Z.Item,{children:(0,u.jsx)("p",{className:"nav-link",onClick:function(){window.scroll(0,0),e(!1),t("expensecats")},children:"Expense Categories"})}),(0,u.jsx)(c.Z.Item,{children:(0,u.jsx)("p",{className:"nav-link",onClick:function(){window.scroll(0,0),e(!1),t("expenses")},children:"Expenses"})})," "]})]}),(0,u.jsx)("hr",{})]})},k=t(3872),h=t(2841),f=t(3389),j=t(9250),v=t(9061),g=t(3929),w=t(3312),I=t(9587),y=function(n){var e=n.setDrawer,t=(0,a.s0)();(0,i.v9)((function(n){return n.inst.activeInst}));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{onClick:function(){e(!1),window.scroll(0,0),t("shop-categories")},children:(0,u.jsxs)("strong",{className:"nav-link text-truncate",children:[(0,u.jsx)(v.Z,{})," Product Categories"]})}),(0,u.jsx)("hr",{}),(0,u.jsx)("p",{onClick:function(){e(!1),window.scroll(0,0),t("shop-products")},children:(0,u.jsxs)("strong",{className:"nav-link text-truncate",children:[(0,u.jsx)(g.Z,{})," Shop Products"]})}),(0,u.jsx)("hr",{}),(0,u.jsx)("p",{onClick:function(){e(!1),window.scroll(0,0),t("shop-entries")},children:(0,u.jsxs)("strong",{className:"nav-link text-truncate",children:[(0,u.jsx)(w.Z,{})," Products Entries"]})}),(0,u.jsx)("hr",{}),(0,u.jsx)("p",{onClick:function(){e(!1),window.scroll(0,0),t("pos")},children:(0,u.jsxs)("strong",{className:"nav-link text-truncate",children:[(0,u.jsx)(I.Z,{})," Point Of Sale"]})}),(0,u.jsx)("hr",{})]})},b=t(4169),N=t(4165),Z=t(5861),C=t(2463),L=t(7866),T=t(3750),P=t(1455),S=t(3902),A=t(645),F=t(9362),V=t(4915),D=t(4171),z=t(8382),E=t(7146),M=t(8715),Y=t(8086),O=t(390),U=function(){var n=(0,i.I0)(),e=(0,i.v9)((function(n){return n.auth.user})),t=(0,i.v9)((function(n){return n.online.online})),s=(0,i.v9)((function(n){return n.cred.activeCred}));(0,r.useEffect)((function(){C.W.on("message",function(){var n=(0,Z.Z)((0,N.Z)().mark((function n(e){return(0,N.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(e);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}),[]);var a=function(r){"staff"===r.messageType&&(0,L.Ui)(s.instLinker,e.token,n,t,"socket",r.dataValues),"mode"===r.messageType&&(0,T.yl)(e.token,s.instLinker,n,t,"socket",r.dataValues),"payment"===r.messageType&&(0,S.xt)(e.token,s.instLinker,n,t,"socket",r.dataValues),"online-payment"===r.messageType&&(0,P.a)(e.token,s.instLinker,n,t,"socket",r.dataValues),"expenseCat"===r.messageType&&(0,A.kt)(e.token,s.instLinker,n,t,"socket",r.dataValues),"expense"===r.messageType&&(0,F.mX)(e.token,s.instLinker,n,t,"socket",r.dataValues),"entry"===r.messageType&&(0,V.K9)(e.token,s.instLinker,n,t,"socket",r.dataValues),"shopCat"===r.messageType&&(0,D.nc)(e.token,s.instLinker,n,t,"socket",r.dataValues),"product"===r.messageType&&(0,z.wP)(e.token,s.instLinker,n,t,"socket",r.dataValues),"payrollCat"===r.messageType&&(0,M.$O)(e.token,s.instLinker,n,t,"socket",r.dataValues),"payrollItem"===r.messageType&&(0,O.qI)(e.token,s.instLinker,n,t,"socket",r.dataValues),"payrollEntry"===r.messageType&&(0,Y.gI)(e.token,s.instLinker,n,t,"socket",r.dataValues),"sub"===r.messageType&&(0,E.Ld)(e.token,s.instLinker,n,t,"socket",r.dataValues)};return(0,u.jsx)(u.Fragment,{})},K=t(7185),W=t(6461),$=t(6548),q=t(5420),H=function(){var n=(0,i.I0)(),e=(0,i.v9)((function(n){return n.auth.user})),t=(0,i.v9)((function(n){return n.online.online})),a=(0,i.v9)((function(n){return n.cred.activeCred})),c=(0,i.v9)((function(n){return n.inst.activeInst})),o=(0,i.v9)((function(n){return n.cred.creds})),l=(0,r.useState)(!1),d=(0,s.Z)(l,2),p=d[0],m=d[1],x=(0,r.useState)(!1),k=(0,s.Z)(x,2),h=k[0],f=k[1];(0,r.useEffect)((function(){j()}),[h,e]);var j=function(){var t=(0,Z.Z)((0,N.Z)().mark((function t(){var s;return(0,N.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p){t.next=15;break}if(m(!0),e.token){t.next=8;break}return t.next=5,v();case 5:t.t0=t.sent,t.next=9;break;case 8:t.t0=e;case 9:if(s=t.t0,c.id&&0!=c.id){t.next=13;break}return t.next=13,(0,q.jB)(c,s,n);case 13:g(s),m(!1);case 15:C.W.on("connect",(function(){f(!0)})),C.W.on("disconnect",(function(){f(!1)})),(0,C.z)({clientId:"".concat(parseInt(parseInt("".concat(c.linker).split("").reverse().join(""))/1e3))}),o.map((function(n){n.email!=e.logger&&n.contact!=e.logger||(0,C.z)({token:e.token,instLinker:n.instLinker,room:n.instLinker})}));case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=(0,Z.Z)((0,N.Z)().mark((function t(){var s,r;return(0,N.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,W.F6)(e.logger);case 2:if("register"!==(s=t.sent)&&0!==s){t.next=9;break}return t.next=6,(0,W.a4)(e.logger,e.password,e.linker,e.linker);case 6:r=t.sent,t.next=12;break;case 9:return t.next=11,(0,W.YV)(e.logger,e.password);case 11:r=t.sent;case 12:if(!r.token||!r.user){t.next=15;break}return n((0,$.x4)({name:e.name,email:e.logger,password:e.password,linker:e.linker,live:1,token:r.token,logger:e.logger,id:r.user.id})),t.abrupt("return",{name:e.name,email:e.logger,password:e.password,linker:e.linker,live:1,token:r.token,logger:e.logger,id:r.user.id});case 15:return t.abrupt("return",e);case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(e){1!==parseInt(a.admin)&&1!==parseInt(a.staff)||((0,F.mX)(e.token,a.instLinker,n,t),(0,A.kt)(e.token,a.instLinker,n,t),(0,L.Ui)(a.instLinker,e.token,n,t),(0,V.K9)(e.token,a.instLinker,n,t),(0,D.nc)(e.token,a.instLinker,n,t),(0,z.wP)(e.token,a.instLinker,n,t),(0,S.xt)(e.token,a.instLinker,n,t),(0,K.f_)(e.token,a.instLinker,n,t),(0,P.a)(e.token,a.instLinker,n,t),(0,M.$O)(e.token,a.instLinker,n,t),(0,Y.gI)(e.token,a.instLinker,n,t),(0,O.qI)(e.token,a.instLinker,n,t)),(0,T.yl)(e.token,a.instLinker,n,t),(0,E.Ld)(e.token,a.instLinker,n,t)};return(0,u.jsx)(u.Fragment,{})},X=t(8920),B=function(){var n=(0,a.s0)(),e=(0,i.v9)((function(n){return n.inst.activeInst})),t=(0,i.v9)((function(n){return n.auth.user})),c=((0,i.v9)((function(n){return n.online.online})),(0,i.v9)((function(n){return n.cred.activeCred}))),o=(0,i.v9)((function(n){return n.sub.subs})),l=(0,b.C)(o,c.instLinker),d=(0,r.useState)(!1),m=(0,s.Z)(d,2),v=m[0],g=m[1];return(0,r.useEffect)((function(){c.linker||n("/login")}),[]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(X.Z,{ToggleDrawer:function(){return g(!v)}}),(0,u.jsxs)("div",{style:{marginTop:"40px"},children:[(0,u.jsx)(U,{}),(0,u.jsx)(H,{}),(0,u.jsxs)("div",{className:"d-flex",children:[(0,u.jsxs)("div",{className:"bg-secondary ".concat(v?"side-menu-open":"side-menu"),children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{onClick:function(){g(!1),n("/".concat(e.name))},children:(0,u.jsxs)("span",{className:"nav-link",children:[" ",(0,u.jsxs)("p",{className:"text-truncate text-capitalize m-0 p-0",children:[(0,u.jsx)(k.Z,{})," ",e.name]})," ",(0,u.jsx)("small",{children:parseInt(parseInt("".concat(e.linker).split("").reverse().join(""))/1e3)})]})}),(0,u.jsx)("hr",{}),(0,u.jsx)("p",{onClick:function(){g(!1),n("profile")},children:(0,u.jsxs)("strong",{className:"nav-link text-truncate",children:[(0,u.jsx)(h.Z,{})," ",t.name||t.logger]})}),(0,u.jsx)("hr",{}),1===parseInt(c.admin)&&l>0?(0,u.jsx)(p,{setDrawer:g}):null," ",1===parseInt(c.admin)&&l>0?(0,u.jsx)(x,{setDrawer:g}):null]}),(1===parseInt(c.admin)||1===parseInt(c.staff))&&l>0?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(y,{setDrawer:g})}):null," ",(0,u.jsx)("div",{children:(0,u.jsxs)("p",{children:[l-2592e3<0&&1===parseInt(c.admin)?(0,u.jsx)("span",{onClick:function(){window.scroll(0,0),n(e.sub&&0!=e.sub&&""!=e.sub&&isNaN(parseInt(e.sub))?"/".concat(e.name,"/activate-web/").concat(e.name,"/").concat(e.clientId):"/".concat(e.name,"/activate/").concat(e.name,"/").concat(e.clientId)),g(!1)},className:"text-center",style:{color:"hotpink",cursor:"pointer"},children:(0,u.jsx)("small",{children:"Activate "})}):null," ",(0,u.jsx)("br",{}),(0,u.jsx)("span",{onClick:function(){n("/".concat(e.name,"/terms")),g(!1)},className:"text-center text-info",style:{cursor:"pointer",fontSize:"12px"},children:(0,u.jsx)("small",{children:"Terms And Conditions "})})," ",(0,u.jsx)("br",{}),(0,u.jsx)("span",{onClick:function(){n("/".concat(e.name,"/privacy")),g(!1)},className:"text-center text-info",style:{cursor:"pointer",fontSize:"12px"},children:(0,u.jsx)("small",{children:"Privacy Policy "})})," ",(0,u.jsx)("br",{}),(0,u.jsx)("span",{className:"text-center text-light",style:{cursor:"pointer",fontSize:"12px"},children:(0,u.jsxs)("small",{children:[(0,u.jsx)(f.Z,{})," www.techsystems.world"]})}),(0,u.jsx)("br",{}),(0,u.jsx)("span",{className:"text-center text-light",style:{cursor:"pointer",fontSize:"12px"},children:(0,u.jsxs)("small",{children:[(0,u.jsx)(j.Z,{})," contact.techsystems@gmail.com"]})}),(0,u.jsx)("br",{}),(0,u.jsx)("span",{className:"text-center text-light",style:{cursor:"pointer",fontSize:"12px"},children:(0,u.jsxs)("small",{children:["\xa9 ",(new Date).getFullYear()," Techsystems"]})})]})})]}),(0,u.jsxs)("div",{className:"".concat(v?"main-page-drawer-open":"main-page-drawer-closed"),children:[l<0?(0,u.jsx)(u.Fragment,{children:o.length>0?(0,u.jsxs)("p",{className:"text-danger text-center h6",children:["Subscription Lapsed"," ",1===parseInt(c.admin)?(0,u.jsx)("span",{className:"text-primary btn-link",style:{cursor:"pointer"},onClick:function(){window.scroll(0,0),n(e.sub&&0!=e.sub&&""!=e.sub&&isNaN(parseInt(e.sub))?"/".concat(e.name,"/activate-web/").concat(e.name,"/").concat(e.clientId):"/".concat(e.name,"/activate/").concat(e.name,"/").concat(e.clientId))},children:(0,u.jsx)("em",{children:"Click To Activate"})}):"Contact Your Institution Admin to Activate"]}):(0,u.jsxs)("p",{className:"text-danger text-center h6",children:["Trial Period Lapsed"," ",1===parseInt(c.admin)?(0,u.jsx)("span",{className:"text-primary btn-link",style:{cursor:"pointer"},onClick:function(){window.scroll(0,0),n(e.sub&&0!=e.sub&&""!=e.sub&&isNaN(parseInt(e.sub))?"/".concat(e.name,"/activate-web/").concat(e.name,"/").concat(e.clientId):"/".concat(e.name,"/activate/").concat(e.name,"/").concat(e.clientId))},children:(0,u.jsx)("em",{children:"Click To Activate"})}):"Contact Your Institution Admin to Activate"]})}):l<432e3?(0,u.jsx)(u.Fragment,{children:o.length>0?(0,u.jsxs)("p",{className:"text-danger text-center h6",children:["Subscription Lapsing in ",parseInt(l/86400)," ","Days",1===parseInt(c.admin)?(0,u.jsx)("span",{className:"text-primary btn-link",style:{cursor:"pointer"},onClick:function(){window.scroll(0,0),n(e.sub&&0!=e.sub&&""!=e.sub&&isNaN(parseInt(e.sub))?"/".concat(e.name,"/activate-web/").concat(e.name,"/").concat(e.clientId):"/".concat(e.name,"/activate/").concat(e.name,"/").concat(e.clientId))},children:(0,u.jsx)("em",{children:"Click To Activate"})}):"Contact Your Institution Admin to Activate"]}):(0,u.jsxs)("p",{className:"text-danger text-center h6",children:["Trial Period Lapsing In ",parseInt(l/86400)," ","Days",1===parseInt(c.admin)?(0,u.jsx)("span",{className:"text-primary btn-link",style:{cursor:"pointer"},onClick:function(){window.scroll(0,0),n(e.sub&&0!=e.sub&&""!=e.sub&&isNaN(parseInt(e.sub))?"/".concat(e.name,"/activate-web/").concat(e.name,"/").concat(e.clientId):"/".concat(e.name,"/activate/").concat(e.name,"/").concat(e.clientId))},children:(0,u.jsx)("em",{children:"Click To Activate"})}):"Contact Your Institution Admin to Activate"]})}):null,(0,u.jsx)("div",{className:"bg-light",children:(0,u.jsx)(a.j3,{})})]})]})]})]})}},4169:function(n,e,t){t.d(e,{C:function(){return s}});var s=function(n,e){return n.filter((function(n){return n.softwareId==parseInt(parseInt("".concat(e).split("").reverse().join(""))/1e3)})).sort((function(n,e){return n.linker-e.linker})).reduce((function(n,e){return n.some((function(n){return n.code==e.code}))||n.push(e),n}),[]).map((function(n,t){var s=parseInt(parseInt("".concat(e).split("").reverse().join(""))/1e3),r=0;if(s==n.softwareId){var a=(n.code-s)/(t+2);r=99===a&&0===t||29===a&&t>0?31622400:31622400===a||15811200===a||7905600===a||2635200===a?a:63244800===a?632448e5:0}return r})).reduce((function(n,e){return+n+ +e}),0)+parseInt(e/1e3)+2592e3-parseInt(Date.now()/1e3)}}}]);
//# sourceMappingURL=413.bd55a722.chunk.js.map